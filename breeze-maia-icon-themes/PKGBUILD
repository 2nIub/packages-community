# Maintainer: Bernhard Landauer <oberon@manjaro.org>
# Contributor: Philip MÃ¼ller <philm@manjaro.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Antonio Rojas

pkgname=breeze-maia-icon-themes
_pkgname=breeze-icons
pkgver=5.21.0
pkgrel=7
pkgdesc='Breeze icon themes with Maia colors'
arch=('any')
url='https://community.kde.org/Frameworks'
_commit=2c3510f42e7109a4452dd1aba67bf1719c7e9464
license=('LGPL')
makedepends=('extra-cmake-modules' 'qt5-base')
source=("$_pkgname.tar.gz::https://github.com/KDE/$_pkgname/archive/$_commit.tar.gz")
md5sums=('293977cacaafc00ab00b8abb6d43b1cd')

prepare() {
  mkdir build
  cd $_pkgname-$_commit
}

build() {
  cd $srcdir/build
  cmake ../$_pkgname-$_commit \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DKDE_INSTALL_USE_QT_SYS_PATHS=ON
  make
}

package() {
  cd build
  make DESTDIR="$pkgdir" install

  msg "Adjusting icon colors..."
  cd $pkgdir/usr/share/icons
  find . ! -type l -name "*.svg" -exec sed -i "s/147eb8/338676/g;s/3daee9/16a085/g;s/6cc1ef/32B39A/g;s/1272a5/0c7869/g" '{}' \;
  find . -name "index.*" -exec sed -i "s/Breeze/Breeze-Maia/g;s/Maia Dark/Maia-Dark/g" '{}' \;
  mv breeze Breeze-Maia
  mv breeze-dark Breeze-Maia-Dark
}
