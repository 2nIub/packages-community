# Maintainer: Philip Mueller <philm|at|manjaro|dot|org>
# Contributor: Graeme Gott <graeme@gottcode.org>
# Contributor: Diego Principe <cdprincipe@at@gmail@dot@com>

pkgname=xfce4-whiskermenu-plugin
pkgver=1.0.3
pkgrel=1
pkgdesc="Alternate Xfce menu"
arch=('i686' 'x86_64')
url="http://gottcode.org/${pkgname}/"
license=('GPL2')
depends=('xfce4-panel')
makedepends=('cmake' 'git')
install=${pkgname}.install
source=(git://github.com/gottcode/xfce4-whiskermenu-plugin.git)
md5sums=('SKIP')

pkgver() {
  cd ${srcdir}/${pkgname}
  echo "`git tag | tail -1 | sed 's|v||g'`.`git describe --always | cut -d- -f2`.`git describe --always | cut -d- -f3`"
  # Workaround since no 1.0.3 tag yet
  #echo "1.0.3.`git describe --always | cut -d- -f2`.`git describe --always | cut -d- -f3`"
}

build() {
  cd ${srcdir}/${pkgname}
  cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd ${srcdir}/${pkgname}
  make install DESTDIR=${pkgdir}
}
