# Maintainer: Somasis <somasis@cryptolab.net>
# Contributor: Bernhard Landauer <oberon@manjaro.org>

pkgname=mugshot
pkgver=0.3.1
pkgrel=1
pkgver_min=${pkgver%.*}
_git=2ec0048976153abe9a47d032f10a5d2a244cc24a
pkgdesc="Program to update personal user details"
arch=('any')
url="https://launchpad.net/mugshot"
license=('GPLv3')
depends=('python-cairo'
	'python-dbus'
	'python-distutils-extra'
	'python-gobject'
	'python-pexpect')
optdepends=('gstreamer0.10-good-plugins: webcam support')
options=(!emptydirs)
source=("https://launchpad.net/mugshot/$pkgver_min/$pkgver/+download/mugshot-$pkgver.tar.gz"
	office-phone.patch
	"avatars-$_git.tar.gz::http://github.com/oberon2007/avatars/archive/$_git.tar.gz")
md5sums=('edc71cf248438bd8ea574d00746ab2b9'
         'e4ea8f6762f9c3e4023ca73e4fc32a62'
         '055cf0c583a36064007fd0ce6d3a734b')

prepare() {
    cd $srcdir/$pkgname-$pkgver
    patch -p1 -i $srcdir/office-phone.patch
}

package() {
    cd $srcdir/$pkgname-$pkgver
    python3 setup.py install --root $pkgdir

    # install our stock avatars
    cd $srcdir/avatars-$_git
    install -dm755 $pkgdir/usr/share/pixmaps
    cp -r faces $pkgdir/usr/share/pixmaps
}
